[[TableOfContents]]

/!\ '''위키를 업그레이드 하기 전에 꼭 백업하세요!''' 특별한 경우가 아니라면 기존의 데이타를 잃게 되거나 하지는 않으나, 아주 사소한 실수로 예전의 데이타를 잃을 가능성도 있습니다. @)

이 문서는 모니위키를 업그레이드 하거나 다른 웹 호스팅 사이트로 이전하고자 할 때 필요한 것에 대해 설명하고 있습니다.

MoniWiki는 기본적으로 backup과 restore 액션을 지원하므로 다른 사이트로 이전하는 것을 쉽게 할 수 있으며, rcs를 설치하지 않은 위키에 대해서도 정기적인 backup만으로 자신의 위키 데이타를 비교적 안전하게 보존할 방법을 제공합니다.

== 수동 업데이트 ==
모니위키 1.0.8 버전 이전에는 간단한 업그레이드를 위한 자동화 스크립트를 제공하지 않으며, 1.0.9버전 이후에는 간단한 업그레이드 스크립트(UpgradeScript)를 제공합니다 (upgrade.sh)

UpgradeScript가 하는 일은, 위키 엔진(*.php)을 업데이트하고, 기존의 위키엔진을 사용자가 변경하거나 해서 사용하고 있던 *.php는 없는지 검사하고 사용자가 변경한 *.php파일이 있다면 백업해줍니다.

아래는 `upgrade.sh`를 사용하지 않고 수동으로 직접 업그레이드 하는 방법을 설명합니다.
=== 업그레이드 하기 ===
모니위키를 설치한 후에 `config/*` 및 `config.php`를 제외한 특별히 다른 아무 소스파일도 변경된 것이 없다면, 새로 다운로드 받은 압축파일을 단순히 덮어 쓰는 것 만으로도 업그레이드가 완료됩니다.

그렇지 않고 일부 파일을 변경한 경우에는 조금 더 세심한 주의가 필요할 것입니다.

`wiki.php`, `wikilib.php`는 가장 중요한 위키엔진입니다. 대부분 사용자가 직접 변경해서 사용하는 경우는 아마 이 두개의 파일일 것입니다.
기존의 것을 잘 보존한 후에 새로운 파일로 교체해 줍니다.
이것과 함께 `wikismiley.php` `lib/*.php` `plugin` 아래의 모든 파일을 새것으로 교체합니다.

다음은 `css/*.css` `imgs/*` `theme/*` `local/*` 등등의 파일을 업데이트합니다. 기존에 사용자가 변경한 파일이 있다면 반드시 백업하시기 바랍니다.
또한 `data/intermap.txt` 파일 등이 새롭게 갱신되어 있을 수 있으므로 이것도 업그레이드 해주어야 합니다.

(이런 복잡한 작업을 UpgradeScript를 통해 보다 손쉽게 하실 수 있습니다)

=== 설정 업데이트 ===
위의 단계를 통해 기본적인 업그레이드가 완료됩니다. 그 다음에는 모니위키가 설치되어 있는 디렉토리에 위치한 예전의 `config.php`는 새 버전의 `config.php.default`를 참고해서 바뀐 점이 없는지 혹은 새로운 기능이 첨가된 것은 없는지 점검합니다.

가장 쉽게 설정하는 방법은, 기존의 `config.php` 파일을 다른 이름으로 바꾼 후에 (예를 들어 `config.php.my`) `monisetup.php`를 브라우저를 통해 열어서 `config.php`를 다시 만드는 것입니다. (이 때 `chmod 2777 . data` 명령으로 미리 퍼미션을 조정해 두어야 합니다)


이런 절차가 필요한 이유는 새로운 버전에서는 새로운 기능을 지원할 수 있고, 그것에 대한 설정을 추가해 주어야 제대로 작동하기 때문입니다.
새로 추가된 옵션은 `config.php.default` 파일에 담겨 있으므로 이 파일을 열어서 확인해 보실 수 있습니다.

=== 기타 문제 해결 ===
업데이트중에 발생한 문제점은 http://dev.naver.com/projects/moniwiki 를 통해 문의해보시기 바랍니다.

업그레이드 혹은 이전(호스팅 서버 옮김)에 대한 내용은 BackupScripts를 참고하세요.
----
[[Navigation(HelpOnAdministration)]]
