# $Id$
#
# locale/Makefile
#
# This is a replacement for locale/translate.sh to avoid remaking
# files that don't need to be remade.
#

POT_FILE = po/moniwiki.pot

.PHONY: all po mo clean dep ${POT_FILE}

all	: po mo
po 	: # dependencies are auto-generated by 'make dep' , see below
mo	: # dependencies are auto-generated by 'make dep' , see below

${POT_FILE} : # dependencies are auto-generated by 'make dep' , see below
	cp -f $@ $@~
	xgettext -L C++ -k_ -kt_ -k_t -k__printf -k__sprintf -k__vsprintf -kfmt -o $@.extracted $^
	msgmerge -o $@ $@~ $@.extracted && rm -f $@.extracted

po/%.po : ${POT_FILE}
	test -f $@ || touch $@
	cp -f $@ $@~
	msgmerge -o $@.new $@~ $^ && mv -f $@.new $@

%/LC_MESSAGES/moniwiki.mo : po/%.po
	mkdir -p $*/LC_MESSAGES
	msgfmt -o $@ $<

euckr:
	iconv -f UTF-8 -t EUC-KR po/ko.po |sed 's/UTF-8/EUC-KR/' >po/ko_KR.po
	mkdir -p ko_KR/LC_MESSAGES/
	make ko_KR/LC_MESSAGES/moniwiki.mo
	make ko_KR/LC_MESSAGES/moniwiki.php
	rm po/ko_KR.po

# Generate .php from .mo rather than .po to maximize
# the probability of agreement between .mo and .php files.
%/LC_MESSAGES/moniwiki.php : %/LC_MESSAGES/moniwiki.mo
	msgunfmt $< | awk -f make-php-trans.awk > $@

clean :
	rm -f ${MO_FILES} ${PHP_FILES}

dep :
	$(SHELL) update-makefile.sh


# DO NOT DELETE THIS LINE
#
# The remainder of this file is auto-generated
#
# (Run 'make dep' to regenerate this section.)
#
po: po/fr.po
mo: fr/LC_MESSAGES/moniwiki.mo fr/LC_MESSAGES/moniwiki.php
po: po/ko.po
mo: ko/LC_MESSAGES/moniwiki.mo ko/LC_MESSAGES/moniwiki.php
#
${POT_FILE}: ../plugin/ABBR.php
${POT_FILE}: ../plugin/aclinfo.php
${POT_FILE}: ../plugin/admin.php
${POT_FILE}: ../plugin/Anchor.php
${POT_FILE}: ../plugin/atom.php
${POT_FILE}: ../plugin/Attachment.php
${POT_FILE}: ../plugin/Attachments.php
${POT_FILE}: ../plugin/autogoto.php
${POT_FILE}: ../plugin/autosave.php
${POT_FILE}: ../plugin/BabelFish.php
${POT_FILE}: ../plugin/backup.php
${POT_FILE}: ../plugin/Bar.php
${POT_FILE}: ../plugin/bbs.php
${POT_FILE}: ../plugin/BlogArchives.php
${POT_FILE}: ../plugin/BlogCategories.php
${POT_FILE}: ../plugin/BlogChanges.php
${POT_FILE}: ../plugin/Blog.php
${POT_FILE}: ../plugin/blogrss.php
${POT_FILE}: ../plugin/bookmark.php
${POT_FILE}: ../plugin/bts.php
${POT_FILE}: ../plugin/cacheadmin.php
${POT_FILE}: ../plugin/Calendar.php
${POT_FILE}: ../plugin/chat.php
${POT_FILE}: ../plugin/chmod.php
${POT_FILE}: ../plugin/Cite.php
${POT_FILE}: ../plugin/Clip.php
${POT_FILE}: ../plugin/Comment.php
${POT_FILE}: ../plugin/css.php
${POT_FILE}: ../plugin/Diff.php
${POT_FILE}: ../plugin/dot.php
${POT_FILE}: ../plugin/download.php
${POT_FILE}: ../plugin/Draw.php
${POT_FILE}: ../plugin/DueDate.php
${POT_FILE}: ../plugin/Echo.php
${POT_FILE}: ../plugin/EditHints.php
${POT_FILE}: ../plugin/EditToolbar.php
${POT_FILE}: ../plugin/EngDic.php
${POT_FILE}: ../plugin/FastSearch.php
${POT_FILE}: ../plugin/filter/abbr.php
${POT_FILE}: ../plugin/filter/antispam.php
${POT_FILE}: ../plugin/filter/cite.php
${POT_FILE}: ../plugin/filter/fiximgpath.php
${POT_FILE}: ../plugin/filter/indexer_ko.php
${POT_FILE}: ../plugin/filter/nforge.php
${POT_FILE}: ../plugin/filter.php
${POT_FILE}: ../plugin/filter/sample.php
${POT_FILE}: ../plugin/filter/simplere.php
${POT_FILE}: ../plugin/filter/texturize.php
${POT_FILE}: ../plugin/fixmoin.php
${POT_FILE}: ../plugin/foaf.php
${POT_FILE}: ../plugin/FootNote.php
${POT_FILE}: ../plugin/format.php
${POT_FILE}: ../plugin/Fortune.php
${POT_FILE}: ../plugin/freemind.php
${POT_FILE}: ../plugin/FullSearch.php
${POT_FILE}: ../plugin/function/returnHello.php
${POT_FILE}: ../plugin/function/toc.php
${POT_FILE}: ../plugin/Gallery.php
${POT_FILE}: ../plugin/GetText.php
${POT_FILE}: ../plugin/GoogleTrans.php
${POT_FILE}: ../plugin/home.php
${POT_FILE}: ../plugin/html2pdf.php
${POT_FILE}: ../plugin/HTML.php
${POT_FILE}: ../plugin/Icon.php
${POT_FILE}: ../plugin/identicon.php
${POT_FILE}: ../plugin/ImageFileSize.php
${POT_FILE}: ../plugin/ImportUrl.php
${POT_FILE}: ../plugin/Include.php
${POT_FILE}: ../plugin/Info.php
${POT_FILE}: ../plugin/InputForm.php
${POT_FILE}: ../plugin/ISBN.php
${POT_FILE}: ../plugin/JME.php
${POT_FILE}: ../plugin/Keywords.php
${POT_FILE}: ../plugin/LastChange.php
${POT_FILE}: ../plugin/latex2png.php
${POT_FILE}: ../plugin/LikePages.php
${POT_FILE}: ../plugin/LineHeight.php
${POT_FILE}: ../plugin/login.php
${POT_FILE}: ../plugin/MailTo.php
${POT_FILE}: ../plugin/man_get.php
${POT_FILE}: ../plugin/markup.php
${POT_FILE}: ../plugin/MathChooser.php
${POT_FILE}: ../plugin/Media.php
${POT_FILE}: ../plugin/minilogin.php
${POT_FILE}: ../plugin/MoniCalendar.php
${POT_FILE}: ../plugin/moniedit.php
${POT_FILE}: ../plugin/moztab.php
${POT_FILE}: ../plugin/msgfmt.php
${POT_FILE}: ../plugin/msgtrans.php
${POT_FILE}: ../plugin/Navigation.php
${POT_FILE}: ../plugin/new.php
${POT_FILE}: ../plugin/notitle.php
${POT_FILE}: ../plugin/OeKaki.php
${POT_FILE}: ../plugin/OrphanedPages.php
${POT_FILE}: ../plugin/PageHits.php
${POT_FILE}: ../plugin/PageLinks.php
${POT_FILE}: ../plugin/pagelist.php
${POT_FILE}: ../plugin/pageview.php
${POT_FILE}: ../plugin/PGBR.php
${POT_FILE}: ../plugin/Play.php
${POT_FILE}: ../plugin/PluginInfo.php
${POT_FILE}: ../plugin/print.php
${POT_FILE}: ../plugin/processor/abc.php
${POT_FILE}: ../plugin/processor/asciimathml.php
${POT_FILE}: ../plugin/processor/bbcode.php
${POT_FILE}: ../plugin/processor/blog.php
${POT_FILE}: ../plugin/processor/bts.php
${POT_FILE}: ../plugin/processor/chat.php
${POT_FILE}: ../plugin/processor/diff.php
${POT_FILE}: ../plugin/processor/dot.php
${POT_FILE}: ../plugin/processor/enscript.php
${POT_FILE}: ../plugin/processor/folding.php
${POT_FILE}: ../plugin/processor/freemind.php
${POT_FILE}: ../plugin/processor/geshi.php
${POT_FILE}: ../plugin/processor/gnuplot.php
${POT_FILE}: ../plugin/processor/hello.php
${POT_FILE}: ../plugin/processor/html.php
${POT_FILE}: ../plugin/processor/itex.php
${POT_FILE}: ../plugin/processor/jade.php
${POT_FILE}: ../plugin/processor/jmol.php
${POT_FILE}: ../plugin/processor/latexmathml.php
${POT_FILE}: ../plugin/processor/latex.php
${POT_FILE}: ../plugin/processor/linuxdoc.php
${POT_FILE}: ../plugin/processor/live3d.php
${POT_FILE}: ../plugin/processor/man.php
${POT_FILE}: ../plugin/processor/markdown.php
${POT_FILE}: ../plugin/processor/metapost.php
${POT_FILE}: ../plugin/processor/mimetex.php
${POT_FILE}: ../plugin/processor/monimarkup.php
${POT_FILE}: ../plugin/processor/octave.php
${POT_FILE}: ../plugin/processor/pic.php
${POT_FILE}: ../plugin/processor/po.php
${POT_FILE}: ../plugin/processor/pre.php
${POT_FILE}: ../plugin/processor/python.php
${POT_FILE}: ../plugin/processor/randomquote.php
${POT_FILE}: ../plugin/processor/sfd.php
${POT_FILE}: ../plugin/processor/textile.php
${POT_FILE}: ../plugin/processor/text_xml.php
${POT_FILE}: ../plugin/processor/tpl_.php
${POT_FILE}: ../plugin/processor/vim.php
${POT_FILE}: ../plugin/processor/whtml.php
${POT_FILE}: ../plugin/processor/xslt.php
${POT_FILE}: ../plugin/processor/xsltproc.php
${POT_FILE}: ../plugin/quicklinks.php
${POT_FILE}: ../plugin/RandomBanner.php
${POT_FILE}: ../plugin/Rating.php
${POT_FILE}: ../plugin/rawblog.php
${POT_FILE}: ../plugin/rawtext.php
${POT_FILE}: ../plugin/rcsexport.php
${POT_FILE}: ../plugin/rcsimport.php
${POT_FILE}: ../plugin/rcs.php
${POT_FILE}: ../plugin/rcspurge.php
${POT_FILE}: ../plugin/rdf_blog.php
${POT_FILE}: ../plugin/RecentChanges.php
${POT_FILE}: ../plugin/referer.php
${POT_FILE}: ../plugin/rename.php
${POT_FILE}: ../plugin/restore.php
${POT_FILE}: ../plugin/revert.php
${POT_FILE}: ../plugin/rss_blog.php
${POT_FILE}: ../plugin/rss.php
${POT_FILE}: ../plugin/rss_rc.php
${POT_FILE}: ../plugin/scrap.php
${POT_FILE}: ../plugin/SearchPlugin.php
${POT_FILE}: ../plugin/security/acl.php
${POT_FILE}: ../plugin/security/authbasic.php
${POT_FILE}: ../plugin/security/community.php
${POT_FILE}: ../plugin/security/desktop.php
${POT_FILE}: ../plugin/security/htaccesslogin.php
${POT_FILE}: ../plugin/security/mustlogin.php
${POT_FILE}: ../plugin/security/needtologin.php
${POT_FILE}: ../plugin/security/nforge.php
${POT_FILE}: ../plugin/security/robot.php
${POT_FILE}: ../plugin/security/sample.php
${POT_FILE}: ../plugin/security/userbased.php
${POT_FILE}: ../plugin/security/wikimaster.php
${POT_FILE}: ../plugin/sendping.php
${POT_FILE}: ../plugin/ShowSmiley.php
${POT_FILE}: ../plugin/sitemap.php
${POT_FILE}: ../plugin/SlideShow.php
${POT_FILE}: ../plugin/SmileyChooser.php
${POT_FILE}: ../plugin/Stat.php
${POT_FILE}: ../plugin/subscribe.php
${POT_FILE}: ../plugin/SWFUpload.php
${POT_FILE}: ../plugin/SystemInfo.php
${POT_FILE}: ../plugin/Test.php
${POT_FILE}: ../plugin/TextDict.php
${POT_FILE}: ../plugin/theme.php
${POT_FILE}: ../plugin/ticket.php
${POT_FILE}: ../plugin/Tour.php
${POT_FILE}: ../plugin/TPL.php
${POT_FILE}: ../plugin/trackback.php
${POT_FILE}: ../plugin/TTFText.php
${POT_FILE}: ../plugin/TwinPages.php
${POT_FILE}: ../plugin/UploadedFiles.php
${POT_FILE}: ../plugin/UploadFile.php
${POT_FILE}: ../plugin/UploadForm.php
${POT_FILE}: ../plugin/urlencode.php
${POT_FILE}: ../plugin/UrlMapping.php
${POT_FILE}: ../plugin/user/enha.php
${POT_FILE}: ../plugin/userform.php
${POT_FILE}: ../plugin/userinfo.php
${POT_FILE}: ../plugin/user/nforge.php
${POT_FILE}: ../plugin/UWL.php
${POT_FILE}: ../plugin/VisualTour.php
${POT_FILE}: ../plugin/Vote.php
${POT_FILE}: ../plugin/WantedPages.php
${POT_FILE}: ../plugin/whois.php
${POT_FILE}: ../plugin/WordIndex.php
${POT_FILE}: ../wiki.php
${POT_FILE}: ../wikilib.php
${POT_FILE}: ../monisetup.php
${POT_FILE}: ../lib/difflib.php
${POT_FILE}: ../locale/dummy.php
